
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Blog Bom!!BO!">
    <title>Exceptions - Blog Bom!!BO!</title>
    <meta name="author" content="Eddie Lee">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Eddie Lee","sameAs":["https://github.com/RadianceL"],"image":"eddie-personal.jpg"},"articleBody":"在Java程序开发中，会遇到各种异常，常见的NullPonitException(NPE)，IllegalArgumentException等等，Java的优雅之处，很大一部分就在于这些刚开始看着头痛的异常中，一起来了解下\nExceptions首先，什么是异常，通俗来讲，异常，是我们程序出现错误，并无法按照预期执行下去的情况，会抛出一个异常，它会告诉你，某个地方出错了，请示你该如何解决或者修改你的代码。\n那么我们可以简单理解为，这是一个消息，一旦程序遇到问题，原定逻辑无法执行，程序非常忠实于开发者，它不会自己决定该怎么做，此时，程序开始收集信息，例如程序在A类执行到118行代码的地方，遇到了一个无法解决的问题，原定逻辑设置了循环了10[0-9]次，但给定的数组里只有8条数据，该怎么解决？\n当执行到index=8时，给定数组中不存在第8个索引，这里我们遇到的异常是ArrayIndexOutOfBoundsException，给你传递了一个消息:Index: 8, Size: 8，告诉你说，你给了我一个只有8个数据的List，却要我找位置在第8索引，数组越界了，同时，他给你带上了异常栈，最上面是这个异常最开始发生的代码所在位置，然后一级一级往外传，每跳出一层，就记录一级的信息，在没有异常处理的情况下，直接跳到main方法中，展示到控制台中，并终止自己。\n了解了异常是什么，下面来了解下Java 自身的异常体系\nThrowableThrowable就是Java异常体系的起点，基于所有Java的类都显式或隐式的继承于Object类，所以说异常体系的Root对象，就是Throwable，Throwabl旗下有两员悍将，Error，Exception。\n其中Error是主战将军，轻易不出手，出手即打残，一旦我们看到Error级别的错误，表示JVM检测到无法预期的错误，因为是JVM导致的错误，并非程序可以改变，所以最多我们可以看到异常信息，无法捕获处理。根据错误去找环境哪里配置的不正确，或者重装一次Java，通常会解决问题\n另外一个Exception类，是文官，文官通常讲究游说之道，哪里不合适我们再谈谈，但这种谈也分强硬方CheckedException和弱势方RunntimeException，第一种是直接继承自Exception，这种强硬的方式，必须要给出处理办法，如果你调用的方法中可能抛出这种错，那么你必须在方法调用的地方进行处理，或者选择继续往上抛，否则编译不通过，常见的CheckedException有IOException。另外一种方式，就很柔和了，但是阴损，这种方式就是继承自RunntimeException的异常，处理不处理都行，不往上层抛也行，反正也不告诉你这块能出异常，你要遇到了就加上异常处理，你要遇不到，就等客户遇到了告诉你。\n下面是一张Throwable的Diagrams图，看不清的朋友右键图片下载到本地放大来看\n自定义异常体系是不是可以基于Java的异常体系来搭建属于我们自己的呢？\n首先我来描述一个场景，一个电商购物车下单业务，主业务逻辑为\n\n校验库存，减库存\n校验商品可售性\n校验购物车预设的活动满减策略、组合策略、是否跨店铺\n购物车拆单、子单分别发往对应商家\n商家发货。。。\n\n这个场景相对复杂，请同学们想象一下，这个下单场景调用很深，各种服务和类嵌套，其中校验商品可售性的逻辑有大概10个类，如果单纯用return来控制逻辑，会有多乱，每层返回都要做一次校验，一旦忘记拦截，就会造成意想不到的结果。\n此时就需要异常来控制了，通常这种复杂场景都会有主流程服务来控制，按照1-5步骤，顺序执行服务，每个步骤就是一个场景行为(action), 那么如果用异常来处理，我只要要在对应的场景行为调用上套一层自己的业务异常处理类就可以了对吧\n此时我需要区分，什么错是我们业务异常，什么是数据库异常，如果我们没有自定义异常体系，只能依赖拦截RuntimeException来做是不可能实现上述需求的，那么解决这个首先，我们先创建一个类，假设ElBasicException extend RuntimeException，并实现所需要的构造函数，通常我们不会直接在业务中抛出BasicException，假设我们在控制层做参数校验，检测出某一个参数长度超长，这时候我们可以新建一个异常，命名为ElParameterByteArrayOutOfMaxException，并继承于ElBasicException，抛出这异常，并在全局异常处理器中拦截，判断如果 e instanceof ElBasicException，那么就走我们业务的处理机制，如果不是，那么返回“系统错误“。\n来看下实现：1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * 扩展运行时异常 * since 2019/12/7 * * @author eddie */@Slf4jpublic class ExtendRuntimeException extends RuntimeException&#123;    private ErrorMessage errorMessage;    public ExtendRuntimeException() &#123;        this(ErrorMessage.EMPTY_ERROR_MESSAGE);        this.errorMessage = ErrorMessage.EMPTY_ERROR_MESSAGE;        log.error(\"无法定义的异常, &#123;&#125; : &#123;&#125;\", getErrorCode(), getErrorMessage());    &#125;    public ExtendRuntimeException(ErrorMessage errorMessage) &#123;        super(errorMessage.getErrorMessage());        this.errorMessage = errorMessage;        log.error(\"&#123;&#125; : &#123;&#125;\", getErrorCode(), getErrorMessage());    &#125;    public ExtendRuntimeException(ErrorMessage errorMessage, Throwable cause) &#123;        super(errorMessage.getErrorMessage(), cause);        this.errorMessage = errorMessage;        log.error(\"&#123;&#125; : &#123;&#125;\", getErrorCode(), getErrorMessage(), cause);    &#125;    public String getErrorCode()&#123;        if (Objects.isNull(errorMessage))&#123;            return \"\";        &#125;        return errorMessage.getErrorCode();    &#125;    public String getErrorMessage()&#123;        if (Objects.isNull(errorMessage))&#123;            return \"\";        &#125;        return errorMessage.getErrorMessage();    &#125;&#125;\n扩展基类不用太复杂，但这里可以加一些监控配置，比如这里打日志，通过重写logback的appender，把这里的异常写入ELK监控里，不过appender要搞成异步缓存的，缓存一个队列，打印和网络传输都走移步，曾经有人测试异步打印和同步打印的性能区别，结果我忘记了，但差距不小。这里如果还加了网络IO，还有握手挥手的时间，更应该异步处理。\n这里的ErrorMessage其实是对错误信息的封装，其中包含错误码、错误描述等自定义信息，想放啥放啥，还可以做一些时区，日志格式、多语言等封装我们的所有异常都要基于这个异常来扩展，比如如果是DDD领域模型开发的话，每个域都应该有一个自己的基类异常，那领域服务中的异常都应该继承于这个异常，最终我们在下单服务中捕获异常，就直接捕获ExtendRuntimeException就好了\n那还有个问题，如果每个域服务中的异常都不一样，那下单服务中该如何处理呢？这里就涉及到了文章开头提及的集权异常控制中心\n异常控制中心是不是可以基于Java的异常体系来搭建属于我们自己的呢？\n首先我来描述一个场景，一个电商购物车下单业务，主业务逻辑为\n\n校验库存，减库存\n校验商品可售性\n校验购物车预设的活动满减策略、组合策略、是否跨店铺\n购物车拆单、子单分别发往对应商家\n商家发货。。。\n\n这个场景相对复杂，请同学们想象一下，这个下单场景调用很深，各种服务和类嵌套，其中校验商品可售性的逻辑有大概10个类，如果单纯用return来控制逻辑，会有多乱，每层返回都要做一次校验，一旦忘记拦截，就会造成意想不到的结果。\n此时就需要异常来控制了，通常这种复杂场景都会有主流程服务来控制，按照1-5步骤，顺序执行服务，每个步骤就是一个场景行为(action), 那么如果用异常来处理，我只要要在对应的场景行为调用上套一层自己的业务异常处理类就可以了对吧\n此时我需要区分，什么错是我们业务异常，什么是数据库异常，如果我们没有自定义异常体系，只能依赖拦截RuntimeException来做是不可能实现上述需求的，那么解决这个首先，我们先创建一个类，假设ElBasicException extend RuntimeException，并实现所需要的构造函数，通常我们不会直接在业务中抛出BasicException，假设我们在控制层做参数校验，检测出某一个参数长度超长，这时候我们可以新建一个异常，命名为ElParameterByteArrayOutOfMaxException，并继承于ElBasicException，抛出这异常，并在全局异常处理器中拦截，判断如果 e instanceof ElBasicException，那么就走我们业务的处理机制，如果不是，那么返回“系统错误“。\n来看下实现：1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * 扩展运行时异常 * since 2019/12/7 * * @author eddie */@Slf4jpublic class ExtendRuntimeException extends RuntimeException&#123;    private ErrorMessage errorMessage;    public ExtendRuntimeException() &#123;        this(ErrorMessage.EMPTY_ERROR_MESSAGE);        this.errorMessage = ErrorMessage.EMPTY_ERROR_MESSAGE;        log.error(\"无法定义的异常, &#123;&#125; : &#123;&#125;\", getErrorCode(), getErrorMessage());    &#125;    public ExtendRuntimeException(ErrorMessage errorMessage) &#123;        super(errorMessage.getErrorMessage());        this.errorMessage = errorMessage;        log.error(\"&#123;&#125; : &#123;&#125;\", getErrorCode(), getErrorMessage());    &#125;    public ExtendRuntimeException(ErrorMessage errorMessage, Throwable cause) &#123;        super(errorMessage.getErrorMessage(), cause);        this.errorMessage = errorMessage;        log.error(\"&#123;&#125; : &#123;&#125;\", getErrorCode(), getErrorMessage(), cause);    &#125;    public String getErrorCode()&#123;        if (Objects.isNull(errorMessage))&#123;            return \"\";        &#125;        return errorMessage.getErrorCode();    &#125;    public String getErrorMessage()&#123;        if (Objects.isNull(errorMessage))&#123;            return \"\";        &#125;        return errorMessage.getErrorMessage();    &#125;&#125;\n扩展基类不用太复杂，但这里可以加一些监控配置，比如这里打日志，通过重写logback的appender，把这里的异常写入ELK监控里，不过appender要搞成异步缓存的，缓存一个队列，打印和网络传输都走移步，曾经有人测试异步打印和同步打印的性能区别，结果我忘记了，但差距不小。这里如果还加了网络IO，还有握手挥手的时间，更应该异步处理。\n这里的ErrorMessage其实是对错误信息的封装，其中包含错误码、错误描述等自定义信息，想放啥放啥，还可以做一些时区，日志格式、多语言等封装我们的所有异常都要基于这个异常来扩展，比如如果是DDD领域模型开发的话，每个域都应该有一个自己的基类异常，那领域服务中的异常都应该继承于这个异常，最终我们在下单服务中捕获异常，就直接捕获ExtendRuntimeException就好了\n那还有个问题，如果每个域服务中的异常都不一样，那下单服务中该如何处理呢？这里就涉及到了文章开头提及的集权异常控制中心\n异常控制中心首先定义一个异常处理声明接口，这个接口有两个方法，一个是返回该领域标识符，另外一个是处理异常逻辑\n1234567891011121314151617181920212223242526272829/** * 异常处理器负责的领域 * since 2019/12/22 * * @author eddie */public interface ExceptionHandler &#123;    /**     * 返回异常处理器所在领域     * @return  异常处理器所在领域     */    String ofExceptionDomain();    /**     * 处理运行时异常     * @param e     异常     * @return      错误信息     */    ErrorMessage handleException(ExtendRuntimeException e);    /**     * 处理 &lt;p&gt;checked&lt;/p&gt; 异常     * @param e     异常     * @return      错误信息     */    ErrorMessage handleException(ImportantErrorException e);&#125;\n最近在公司内接触到了另一个想法，只使用一个异常，例如我们这里的ExtendRuntimeException，然后里面会有丰富的接口，包括扩展执行等等，最终通过错误码来处理不同的逻辑，这样固然简单，但局限了一些东西，不是特别灵活\n\n如果同一种类的异常有多个错误码，例如\n金额异常（103） 错误码 10301 金额格式不正确\n金额异常（103） 错误码 10302 货币种类不支持 \n金额异常（103） 错误码 10303 汇率波动，请稍后重试\n。。。。\n\n\n只想捕获自己的异常，如果所有的异常都是ExtendRuntimeException，那别人写的异常也会被我捕获\n\n所以互相比较来看，如果业务复杂，团队较大，需要管理的领域团队不同，就是用相对灵活一点的方案。至于handleException方法，为什么还返回一个ErrorMessage。其实是为了翻译异常。有些内部异常的错误码只希望打印在控制台上，不透出给外部，另外异常控制中心不应该处理业务逻辑，也就是说异常一旦抵达这里，只能返回给前台了。\n通常按照规范，一个合格的系统，所有的异常都应该是有预期的，也就是不会抛出我们不可预见的错误，预期中的错误，都应该有通用或特殊处理的逻辑来捕获处理，预期外的错误，遇到就需要立即解决，或在异常抛出位置进行转译，但不推荐这么做。\n另外，最好只在必须要抛异常来触发某些操作时抛异常，否则尽量减少抛异常的次数和抛异常的可能，因为我们知道Java的方法调用其实是压栈，方法调用结束就会弹栈，如果在方法调用中出现异常，它会记录当前栈的信息，回到上一层，上一层没有捕获继续往上走，每一次弹出栈都会记录一次信息，属于昂贵消耗，尤其我们在Spring项目中，Spring代码调用层次很深，并且在Spring内部不会为你处理异常信息，所以通常spring项目报错，我们会看到很长很长的异常栈信息，新手甚至找不到这个错误信息是由哪个地方引起的。\nps：理论上我们不应该使用异常来控制业务逻辑，另外异常处理会挂载堆栈信息，调用栈越深，效率越低。但有时系统过于复杂时，为了减少系统复杂度，用异常来中断后续操作也不失为一种优雅的方案\n","dateCreated":"2019-06-16T15:27:44+08:00","dateModified":"2020-01-09T21:58:16+08:00","datePublished":"2019-06-16T15:27:44+08:00","description":"在Java程序开发中，会遇到各种异常，常见的NullPonitException(NPE)，IllegalArgumentException等等，Java的优雅之处，很大一部分就在于这些刚开始看着头痛的异常中，一起来了解下","headline":"Exceptions","image":["https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&fm=27&gp=0.jpg","http://old.bz55.com/uploads/allimg/150719/139-150GZZ039.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://radiancel.github.io/2019/06/16/Exceptions/"},"publisher":{"@type":"Organization","name":"Eddie Lee","sameAs":["https://github.com/RadianceL"],"image":"eddie-personal.jpg","logo":{"@type":"ImageObject","url":"eddie-personal.jpg"}},"url":"https://radiancel.github.io/2019/06/16/Exceptions/","keywords":"Java","thumbnailUrl":"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&fm=27&gp=0.jpg"}</script>
    <meta name="description" content="在Java程序开发中，会遇到各种异常，常见的NullPonitException(NPE)，IllegalArgumentException等等，Java的优雅之处，很大一部分就在于这些刚开始看着头痛的异常中，一起来了解下">
<meta name="keywords" content="Java">
<meta property="og:type" content="blog">
<meta property="og:title" content="Exceptions">
<meta property="og:url" content="https://radiancel.github.io/2019/06/16/Exceptions/index.html">
<meta property="og:site_name" content="Blog Bom!!BO!">
<meta property="og:description" content="在Java程序开发中，会遇到各种异常，常见的NullPonitException(NPE)，IllegalArgumentException等等，Java的优雅之处，很大一部分就在于这些刚开始看着头痛的异常中，一起来了解下">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://radiancel.github.io/2019/06/16/Exceptions/exception-diagrms.png">
<meta property="og:updated_time" content="2020-01-09T13:58:16.847Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Exceptions">
<meta name="twitter:description" content="在Java程序开发中，会遇到各种异常，常见的NullPonitException(NPE)，IllegalArgumentException等等，Java的优雅之处，很大一部分就在于这些刚开始看着头痛的异常中，一起来了解下">
<meta name="twitter:image" content="https://radiancel.github.io/2019/06/16/Exceptions/exception-diagrms.png">
    
    
        
    
    
        <meta property="og:image" content="https://radiancel.github.io/assets/images/eddie-personal.jpg"/>
    
    
        <meta property="og:image" content="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg" />
    
    
        <meta property="og:image" content="http://old.bz55.com/uploads/allimg/150719/139-150GZZ039.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://old.bz55.com/uploads/allimg/150719/139-150GZZ039.jpg" />
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-c4ozcsklz4kht2pebhp44xorvyverh23toayhn7i6ubrpyedak24hv1v0hyd.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Blog Bom!!BO!</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="/assets/images/eddie-personal.jpg" alt="Author&#39;s picture">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/eddie-personal.jpg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">Eddie Lee</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="Categories">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="Archives">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="About">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/RadianceL" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-left
                    " style="background-image:url('http://old.bz55.com/uploads/allimg/150719/139-150GZZ039.jpg');" data-behavior="4">
            
                <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Exceptions
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-06-16T15:27:44+08:00">
	
		    Jun 16, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

    
</div>

            
        </div>

            <div id="main" data-behavior="4"
                 class="hasCover
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>在Java程序开发中，会遇到各种异常，常见的NullPonitException(NPE)，IllegalArgumentException等等，Java的优雅之处，很大一部分就在于这些刚开始看着头痛的异常中，一起来了解下<br><a id="more"></a></p>
<h1 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h1><p>首先，什么是异常，通俗来讲，异常，是我们程序出现错误，并无法按照预期执行下去的情况，会抛出一个异常，它会告诉你，某个地方出错了，请示你该如何解决或者修改你的代码。</p>
<p>那么我们可以简单理解为，这是一个消息，一旦程序遇到问题，原定逻辑无法执行，程序非常忠实于开发者，它不会自己决定该怎么做，此时，程序开始收集信息，例如程序在A类执行到118行代码的地方，遇到了一个无法解决的问题，原定逻辑设置了循环了10[0-9]次，但给定的数组里只有8条数据，该怎么解决？</p>
<p>当执行到index=8时，给定数组中不存在第8个索引，这里我们遇到的异常是ArrayIndexOutOfBoundsException，给你传递了一个消息:<code>Index: 8, Size: 8</code>，告诉你说，你给了我一个只有8个数据的List，却要我找位置在第8索引，数组越界了，同时，他给你带上了异常栈，最上面是这个异常最开始发生的代码所在位置，然后一级一级往外传，每跳出一层，就记录一级的信息，在没有异常处理的情况下，直接跳到main方法中，展示到控制台中，并终止自己。</p>
<p>了解了异常是什么，下面来了解下Java 自身的异常体系</p>
<h1 id="Throwable"><a href="#Throwable" class="headerlink" title="Throwable"></a>Throwable</h1><p>Throwable就是Java异常体系的起点，基于所有Java的类都显式或隐式的继承于Object类，所以说异常体系的Root对象，就是Throwable，Throwabl旗下有两员悍将，Error，Exception。</p>
<p>其中Error是主战将军，轻易不出手，出手即打残，一旦我们看到Error级别的错误，表示JVM检测到无法预期的错误，因为是JVM导致的错误，并非程序可以改变，所以最多我们可以看到异常信息，无法捕获处理。根据错误去找环境哪里配置的不正确，或者重装一次Java，通常会解决问题</p>
<p>另外一个Exception类，是文官，文官通常讲究游说之道，哪里不合适我们再谈谈，但这种谈也分强硬方<code>CheckedException</code>和弱势方<code>RunntimeException</code>，第一种是直接继承自<code>Exception</code>，这种强硬的方式，必须要给出处理办法，如果你调用的方法中可能抛出这种错，那么你必须在方法调用的地方进行处理，或者选择继续往上抛，否则编译不通过，常见的<code>CheckedException</code>有<code>IOException</code>。另外一种方式，就很柔和了，但是阴损，这种方式就是继承自<code>RunntimeException</code>的异常，处理不处理都行，不往上层抛也行，反正也不告诉你这块能出异常，你要遇到了就加上异常处理，你要遇不到，就等客户遇到了告诉你。</p>
<p>下面是一张Throwable的Diagrams图，看不清的朋友右键图片下载到本地放大来看<br><img src="/2019/06/16/Exceptions/exception-diagrms.png" alt="描述"></p>
<h1 id="自定义异常体系"><a href="#自定义异常体系" class="headerlink" title="自定义异常体系"></a>自定义异常体系</h1><p>是不是可以基于Java的异常体系来搭建属于我们自己的呢？</p>
<p>首先我来描述一个场景，一个电商购物车下单业务，主业务逻辑为</p>
<ol>
<li>校验库存，减库存</li>
<li>校验商品可售性</li>
<li>校验购物车预设的活动满减策略、组合策略、是否跨店铺</li>
<li>购物车拆单、子单分别发往对应商家</li>
<li>商家发货。。。</li>
</ol>
<p>这个场景相对复杂，请同学们想象一下，这个下单场景调用很深，各种服务和类嵌套，其中校验商品可售性的逻辑有大概10个类，如果单纯用<code>return</code>来控制逻辑，会有多乱，每层返回都要做一次校验，一旦忘记拦截，就会造成意想不到的结果。</p>
<p>此时就需要异常来控制了，通常这种复杂场景都会有主流程服务来控制，按照1-5步骤，顺序执行服务，每个步骤就是一个场景行为(action), 那么如果用异常来处理，我只要要在对应的场景行为调用上套一层自己的业务异常处理类就可以了对吧</p>
<p>此时我需要区分，什么错是我们业务异常，什么是数据库异常，如果我们没有自定义异常体系，只能依赖拦截RuntimeException来做是不可能实现上述需求的，那么解决这个首先，我们先创建一个类，假设ElBasicException extend RuntimeException，并实现所需要的构造函数，通常我们不会直接在业务中抛出BasicException，假设我们在控制层做参数校验，检测出某一个参数长度超长，这时候我们可以新建一个异常，命名为ElParameterByteArrayOutOfMaxException，并继承于ElBasicException，抛出这异常，并在全局异常处理器中拦截，判断如果 e instanceof ElBasicException，那么就走我们业务的处理机制，如果不是，那么返回“系统错误“。</p>
<p>来看下实现：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩展运行时异常</span></span><br><span class="line"><span class="comment"> * since 2019/12/7</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> eddie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendRuntimeException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ErrorMessage errorMessage;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ExtendRuntimeException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(ErrorMessage.EMPTY_ERROR_MESSAGE);</span><br><span class="line">        <span class="keyword">this</span>.errorMessage = ErrorMessage.EMPTY_ERROR_MESSAGE;</span><br><span class="line">        log.error(<span class="string">"无法定义的异常, &#123;&#125; : &#123;&#125;"</span>, getErrorCode(), getErrorMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ExtendRuntimeException</span><span class="params">(ErrorMessage errorMessage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(errorMessage.getErrorMessage());</span><br><span class="line">        <span class="keyword">this</span>.errorMessage = errorMessage;</span><br><span class="line">        log.error(<span class="string">"&#123;&#125; : &#123;&#125;"</span>, getErrorCode(), getErrorMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ExtendRuntimeException</span><span class="params">(ErrorMessage errorMessage, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(errorMessage.getErrorMessage(), cause);</span><br><span class="line">        <span class="keyword">this</span>.errorMessage = errorMessage;</span><br><span class="line">        log.error(<span class="string">"&#123;&#125; : &#123;&#125;"</span>, getErrorCode(), getErrorMessage(), cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(errorMessage))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> errorMessage.getErrorCode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(errorMessage))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> errorMessage.getErrorMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>扩展基类不用太复杂，但这里可以加一些监控配置，比如这里打日志，通过重写<code>logback</code>的<code>appender</code>，把这里的异常写入<code>ELK</code>监控里，不过<code>appender</code>要搞成异步缓存的，缓存一个队列，打印和网络传输都走移步，曾经有人测试异步打印和同步打印的性能区别，结果我忘记了，但差距不小。这里如果还加了网络IO，还有握手挥手的时间，更应该异步处理。</p>
<p>这里的ErrorMessage其实是对错误信息的封装，其中包含错误码、错误描述等自定义信息，想放啥放啥，还可以做一些时区，日志格式、多语言等封装<br>我们的所有异常都要基于这个异常来扩展，比如如果是<code>DDD</code>领域模型开发的话，每个域都应该有一个自己的基类异常，那领域服务中的异常都应该继承于这个异常，最终我们在下单服务中捕获异常，就直接捕获<code>ExtendRuntimeException</code>就好了</p>
<p>那还有个问题，如果每个域服务中的异常都不一样，那下单服务中该如何处理呢？这里就涉及到了文章开头提及的集权异常控制中心</p>
<h2 id="异常控制中心"><a href="#异常控制中心" class="headerlink" title="异常控制中心"></a>异常控制中心</h2><p>是不是可以基于Java的异常体系来搭建属于我们自己的呢？</p>
<p>首先我来描述一个场景，一个电商购物车下单业务，主业务逻辑为</p>
<ol>
<li>校验库存，减库存</li>
<li>校验商品可售性</li>
<li>校验购物车预设的活动满减策略、组合策略、是否跨店铺</li>
<li>购物车拆单、子单分别发往对应商家</li>
<li>商家发货。。。</li>
</ol>
<p>这个场景相对复杂，请同学们想象一下，这个下单场景调用很深，各种服务和类嵌套，其中校验商品可售性的逻辑有大概10个类，如果单纯用<code>return</code>来控制逻辑，会有多乱，每层返回都要做一次校验，一旦忘记拦截，就会造成意想不到的结果。</p>
<p>此时就需要异常来控制了，通常这种复杂场景都会有主流程服务来控制，按照1-5步骤，顺序执行服务，每个步骤就是一个场景行为(action), 那么如果用异常来处理，我只要要在对应的场景行为调用上套一层自己的业务异常处理类就可以了对吧</p>
<p>此时我需要区分，什么错是我们业务异常，什么是数据库异常，如果我们没有自定义异常体系，只能依赖拦截RuntimeException来做是不可能实现上述需求的，那么解决这个首先，我们先创建一个类，假设ElBasicException extend RuntimeException，并实现所需要的构造函数，通常我们不会直接在业务中抛出BasicException，假设我们在控制层做参数校验，检测出某一个参数长度超长，这时候我们可以新建一个异常，命名为ElParameterByteArrayOutOfMaxException，并继承于ElBasicException，抛出这异常，并在全局异常处理器中拦截，判断如果 e instanceof ElBasicException，那么就走我们业务的处理机制，如果不是，那么返回“系统错误“。</p>
<p>来看下实现：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 扩展运行时异常</span></span><br><span class="line"><span class="comment"> * since 2019/12/7</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> eddie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendRuntimeException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ErrorMessage errorMessage;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ExtendRuntimeException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(ErrorMessage.EMPTY_ERROR_MESSAGE);</span><br><span class="line">        <span class="keyword">this</span>.errorMessage = ErrorMessage.EMPTY_ERROR_MESSAGE;</span><br><span class="line">        log.error(<span class="string">"无法定义的异常, &#123;&#125; : &#123;&#125;"</span>, getErrorCode(), getErrorMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ExtendRuntimeException</span><span class="params">(ErrorMessage errorMessage)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(errorMessage.getErrorMessage());</span><br><span class="line">        <span class="keyword">this</span>.errorMessage = errorMessage;</span><br><span class="line">        log.error(<span class="string">"&#123;&#125; : &#123;&#125;"</span>, getErrorCode(), getErrorMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ExtendRuntimeException</span><span class="params">(ErrorMessage errorMessage, Throwable cause)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(errorMessage.getErrorMessage(), cause);</span><br><span class="line">        <span class="keyword">this</span>.errorMessage = errorMessage;</span><br><span class="line">        log.error(<span class="string">"&#123;&#125; : &#123;&#125;"</span>, getErrorCode(), getErrorMessage(), cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(errorMessage))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> errorMessage.getErrorCode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(errorMessage))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> errorMessage.getErrorMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>扩展基类不用太复杂，但这里可以加一些监控配置，比如这里打日志，通过重写<code>logback</code>的<code>appender</code>，把这里的异常写入<code>ELK</code>监控里，不过<code>appender</code>要搞成异步缓存的，缓存一个队列，打印和网络传输都走移步，曾经有人测试异步打印和同步打印的性能区别，结果我忘记了，但差距不小。这里如果还加了网络IO，还有握手挥手的时间，更应该异步处理。</p>
<p>这里的ErrorMessage其实是对错误信息的封装，其中包含错误码、错误描述等自定义信息，想放啥放啥，还可以做一些时区，日志格式、多语言等封装<br>我们的所有异常都要基于这个异常来扩展，比如如果是<code>DDD</code>领域模型开发的话，每个域都应该有一个自己的基类异常，那领域服务中的异常都应该继承于这个异常，最终我们在下单服务中捕获异常，就直接捕获<code>ExtendRuntimeException</code>就好了</p>
<p>那还有个问题，如果每个域服务中的异常都不一样，那下单服务中该如何处理呢？这里就涉及到了文章开头提及的集权异常控制中心</p>
<h2 id="异常控制中心-1"><a href="#异常控制中心-1" class="headerlink" title="异常控制中心"></a>异常控制中心</h2><p>首先定义一个异常处理声明接口，这个接口有两个方法，一个是返回该领域标识符，另外一个是处理异常逻辑</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异常处理器负责的领域</span></span><br><span class="line"><span class="comment"> * since 2019/12/22</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> eddie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回异常处理器所在领域</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  异常处理器所在领域</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">ofExceptionDomain</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理运行时异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e     异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>      错误信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">ErrorMessage <span class="title">handleException</span><span class="params">(ExtendRuntimeException e)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理 &lt;p&gt;checked&lt;/p&gt; 异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e     异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>      错误信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">ErrorMessage <span class="title">handleException</span><span class="params">(ImportantErrorException e)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最近在公司内接触到了另一个想法，只使用一个异常，例如我们这里的<code>ExtendRuntimeException</code>，然后里面会有丰富的接口，包括扩展执行等等，最终通过错误码来处理不同的逻辑，这样固然简单，但局限了一些东西，不是特别灵活</p>
<ol>
<li>如果同一种类的异常有多个错误码，例如<ul>
<li>金额异常（103） 错误码 10301 金额格式不正确</li>
<li>金额异常（103） 错误码 10302 货币种类不支持 </li>
<li>金额异常（103） 错误码 10303 汇率波动，请稍后重试</li>
<li>。。。。</li>
</ul>
</li>
<li>只想捕获自己的异常，如果所有的异常都是<code>ExtendRuntimeException</code>，那别人写的异常也会被我捕获</li>
</ol>
<p>所以互相比较来看，如果业务复杂，团队较大，需要管理的领域团队不同，就是用相对灵活一点的方案。<br>至于<code>handleException</code>方法，为什么还返回一个<code>ErrorMessage</code>。其实是为了翻译异常。有些内部异常的错误码只希望打印在控制台上，不透出给外部，另外异常控制中心不应该处理业务逻辑，也就是说异常一旦抵达这里，只能返回给前台了。</p>
<p>通常按照规范，一个合格的系统，所有的异常都应该是有预期的，也就是不会抛出我们不可预见的错误，预期中的错误，都应该有通用或特殊处理的逻辑来捕获处理，预期外的错误，遇到就需要立即解决，或在异常抛出位置进行转译，但不推荐这么做。</p>
<p>另外，最好只在必须要抛异常来触发某些操作时抛异常，否则尽量减少抛异常的次数和抛异常的可能，因为我们知道Java的方法调用其实是压栈，方法调用结束就会弹栈，如果在方法调用中出现异常，它会记录当前栈的信息，回到上一层，上一层没有捕获继续往上走，每一次弹出栈都会记录一次信息，属于昂贵消耗，尤其我们在Spring项目中，Spring代码调用层次很深，并且在Spring内部不会为你处理异常信息，所以通常spring项目报错，我们会看到很长很长的异常栈信息，新手甚至找不到这个错误信息是由哪个地方引起的。</p>
<p>ps：理论上我们不应该使用异常来控制业务逻辑，另外异常处理会挂载堆栈信息，调用栈越深，效率越低。但有时系统过于复杂时，为了减少系统复杂度，用异常来中断后续操作也不失为一种优雅的方案</p>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Java/">Java</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/07/10/Spring-State-Machine/" data-tooltip="Spring State Machine" aria-label="PREVIOUS: Spring State Machine">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/31/spring-cloud-prod/" data-tooltip="spring cloud prod" aria-label="NEXT: spring cloud prod">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Eddie Lee. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/07/10/Spring-State-Machine/" data-tooltip="Spring State Machine" aria-label="PREVIOUS: Spring State Machine">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/31/spring-cloud-prod/" data-tooltip="spring cloud prod" aria-label="NEXT: spring cloud prod">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/eddie-personal.jpg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">Eddie Lee</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                浙江
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-dbd16rvloemmuxdzniplmnxxvwoz24eya9wol0b7vvmlokgqsjivmb8dnscy.min.js"></script>
<!--SCRIPTS END-->

    



    </body>
</html>
