
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Blog Bom!!BO!">
    <title>Tag: Java - Blog Bom!!BO!</title>
    <meta name="author" content="Eddie Lee">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Blog Bom!!BO!">
<meta property="og:url" content="https://radiancel.github.io/tags/Java/index.html">
<meta property="og:site_name" content="Blog Bom!!BO!">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Blog Bom!!BO!">
    
    
        
    
    
        <meta property="og:image" content="https://radiancel.github.io/assets/images/eddie-personal.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-c4ozcsklz4kht2pebhp44xorvyverh23toayhn7i6ubrpyedak24hv1v0hyd.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Blog Bom!!BO!</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="/assets/images/eddie-personal.jpg" alt="Author&#39;s picture">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/eddie-personal.jpg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">Eddie Lee</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="Categories">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="Archives">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="About">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/RadianceL" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/12/15/Sliding-Time-Window/">
                            Sliding-Time-Window
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-12-15T10:06:23+08:00">
	
		    Dec 15, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h3 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h3><p>想要完成一个个人轻量级微服务框架，负载均衡和接口安全都需要一个这样的工具来统计访问频率，那么就选择了一种比较传统的方式来实现，其他博客中有提供一些方式，但设计较为简单，不能满足我的需求，所以再起炉灶</p>
<h3 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h3><p>概念上非常简单，就是给定一个数据结构列表，例如20个窗口，步长固定为1，长度为10，当index为<code>11</code>时，该窗口范围为<code>[1-11]</code><br><img src="https://img-blog.csdnimg.cn/2019121512001485.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1N1bW1lcmRyZWFtMTk5Ng==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><p>首先思考一下算法，我们大概需要几个参数【窗口个数、每个时间片时长、队列长度、每个时间片内允许授权个数（可选）】</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 时间窗滑块</span></span><br><span class="line"><span class="comment"> * since 2019/12/8</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> eddie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeWindowSliding</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 队列的总长度  */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> timeSliceSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 每个时间片的时长，以毫秒为单位 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">int</span> timeMillisPerSlice;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 当前所使用的时间片位置 */</span></span><br><span class="line">    <span class="keyword">private</span> AtomicInteger cursor = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 在一个完整窗口期内允许通过的最大阈值 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> threshold;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** 窗口个数 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> windowSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 最小每个时间片的时长，以毫秒为单位 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TIME_MILLIS_PER_SLICE = <span class="number">50</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 最小窗口数量 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_WINDOW_SIZE = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 数据存储 */</span></span><br><span class="line">    <span class="keyword">private</span> TimeWindowSlidingDataSource timeWindowSlidingDataSource;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimeWindowSliding</span><span class="params">(TimeWindowSlidingDataSource timeWindowSlidingDataSource, <span class="keyword">int</span> windowSize, <span class="keyword">int</span> timeMillisPerSlice, <span class="keyword">int</span> threshold)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.timeWindowSlidingDataSource = timeWindowSlidingDataSource;</span><br><span class="line">        <span class="keyword">this</span>.timeMillisPerSlice = timeMillisPerSlice;</span><br><span class="line">        <span class="keyword">this</span>.threshold = threshold;</span><br><span class="line">        <span class="comment">/* 低于一定窗口个数会丢失精准度 */</span></span><br><span class="line">        <span class="keyword">this</span>.windowSize = Math.max(windowSize, DEFAULT_WINDOW_SIZE);</span><br><span class="line">        <span class="comment">/* 保证每个时间窗至少有2个窗口存储 不会重叠 */</span></span><br><span class="line">        <span class="keyword">this</span>.timeSliceSize = <span class="keyword">this</span>.windowSize * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">/* 可以忽略这个操作 数据存储结构中定义的生命周期函数 如果接口有实现会调用 没有实现走默认实现直接return */</span></span><br><span class="line">        timeWindowSlidingDataSource.initTimeSlices();</span><br><span class="line">        <span class="comment">/* 初始化参数校验 */</span></span><br><span class="line">        <span class="keyword">this</span>.verifier();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>初始化函数中包含了一个<code>TimeWindowSlidingDataSource</code>，看下这个接口的定义<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 时间分配数据源</span></span><br><span class="line"><span class="comment"> * since 2019/12/8</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> eddie</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TimeWindowSlidingDataSource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 记录通过记录</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeSlices    时间分片</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> recordKey     记录参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TimeWindowSlidingDataSourceException     时间分片数据源操作异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">allocAdoptRecord</span><span class="params">(<span class="keyword">int</span> timeSlices, String recordKey)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取&lt;recordKey&gt;通过次数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeSlices    时间分片</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> recordKey     记录参数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TimeWindowSlidingDataSourceException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getAllocAdoptRecordTimes</span><span class="params">(<span class="keyword">int</span> timeSlices, String recordKey)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将fromIndex~toIndex之间的时间片计数清零</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fromIndex     起始索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> toIndex       结束索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> totalLength   窗口数量</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TimeWindowSlidingDataSourceException     时间分片数据源操作异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clearBetween</span><span class="params">(<span class="keyword">int</span> fromIndex, <span class="keyword">int</span> toIndex, <span class="keyword">int</span> totalLength)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将index时间片计数清零</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index         索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TimeWindowSlidingDataSourceException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clearSingle</span><span class="params">(<span class="keyword">int</span> index)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据需求 可不使用该函数 该函数会在初始化阶段调用一次</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> TimeWindowSlidingDataSourceException     时间分片数据源操作异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">initTimeSlices</span><span class="params">()</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> TimeWindowSlidingDataSource <span class="title">defaultDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TimeWindowSlidingDataSource() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">private</span> Map&lt;String, Map&lt;String,Integer&gt;&gt; timeWindowSlidingMap = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">allocAdoptRecord</span><span class="params">(<span class="keyword">int</span> timeSlices, String recordKey)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException </span>&#123;</span><br><span class="line">                Map&lt;String, Integer&gt; timeSlicesMap = timeWindowSlidingMap.get(String.valueOf(timeSlices));</span><br><span class="line">                <span class="keyword">if</span> (Objects.isNull(timeSlicesMap))&#123;</span><br><span class="line">                    timeSlicesMap = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">                    timeWindowSlidingMap.put(String.valueOf(timeSlices), timeSlicesMap);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Integer adoptTimes = timeSlicesMap.get(recordKey);</span><br><span class="line">                <span class="keyword">int</span> nextTimes = adoptTimes == <span class="keyword">null</span> ? <span class="number">0</span> : adoptTimes;</span><br><span class="line">                timeSlicesMap.put(recordKey, ++ nextTimes);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAllocAdoptRecordTimes</span><span class="params">(<span class="keyword">int</span> timeSlices, String recordKey)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException </span>&#123;</span><br><span class="line">                Map&lt;String, Integer&gt; timeSlicesMap = timeWindowSlidingMap.get(String.valueOf(timeSlices));</span><br><span class="line">                <span class="keyword">if</span> (Objects.isNull(timeSlicesMap))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                Integer recordTimes = timeSlicesMap.get(recordKey);</span><br><span class="line">                <span class="keyword">return</span> Objects.isNull(recordTimes) ? <span class="number">0</span> : recordTimes;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearBetween</span><span class="params">(<span class="keyword">int</span> fromIndex, <span class="keyword">int</span> toIndex, <span class="keyword">int</span> totalLength)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (fromIndex &gt;= toIndex)&#123;</span><br><span class="line">                    toIndex += totalLength;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">while</span> (fromIndex &lt;= toIndex) &#123;</span><br><span class="line">                    Map&lt;String, Integer&gt; timeWindowSlidingScopeMap = timeWindowSlidingMap.get(String.valueOf(fromIndex));</span><br><span class="line">                    <span class="keyword">if</span> (!Objects.isNull(timeWindowSlidingScopeMap) &amp;&amp; timeWindowSlidingScopeMap.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                        timeWindowSlidingScopeMap.clear();</span><br><span class="line">                    &#125;</span><br><span class="line">                    fromIndex++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clearSingle</span><span class="params">(<span class="keyword">int</span> index)</span> <span class="keyword">throws</span> TimeWindowSlidingDataSourceException </span>&#123;</span><br><span class="line">                Map&lt;String, Integer&gt; timeWindowSlidingScopeMap = timeWindowSlidingMap.get(String.valueOf(index));</span><br><span class="line">                <span class="keyword">if</span> (!Objects.isNull(timeWindowSlidingScopeMap) &amp;&amp; timeWindowSlidingScopeMap.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    timeWindowSlidingScopeMap.clear();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个类其实就是一个约定，默认提供了一个基于<code>HashMap</code>的实现，我需要统计单用户访问接口频率，所以，数据结构采用HashMap，也就是说相当于有一个List&lt;Map&lt;String,Integer&gt;&gt;的结构，但因为习惯问题，我才用了<code>Map&lt;String, Map&lt;String,Integer&gt;&gt;</code> 的结构。</p>
<p>但这个无所谓，因为出于场景考虑，大概率是要支持分布式的，那就需要引入<code>redis</code>，可这是一个工具包，因为这个工具就引入一个<code>redis</code>的包不太划算，所以定义了这么一个约定接口，不管你用什么存储，<code>memchche</code>，<code>redis</code>，<code>mangodb</code>，只要实现了这几个方法，传入工具中就能完成对应的功能，算是一个变形的策略模式</p>
<p>这些参数都初始化好之后，看下算法的部分，提供三个接口：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断是否允许进行访问，未超过阈值的话才会对某个时间片+1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">allowLimitTimes</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = locationIndex();</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// cursor不等于index，将cursor设置为index</span></span><br><span class="line">    <span class="keyword">int</span> oldCursor = cursor.getAndSet(index);</span><br><span class="line">    <span class="keyword">if</span> (oldCursor != index) &#123;</span><br><span class="line">        <span class="comment">// 清零，访问量不大时会有时间片跳跃的情况</span></span><br><span class="line">        clearBetween(oldCursor, index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; timeSliceSize; i++) &#123;</span><br><span class="line">        sum += timeWindowSlidingDataSource.getAllocAdoptRecordTimes(i, key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 阈值判断</span></span><br><span class="line">    <span class="keyword">if</span> (sum &lt;= threshold) &#123;</span><br><span class="line">        <span class="comment">// 未超过阈值才+1</span></span><br><span class="line">        <span class="keyword">this</span>.timeWindowSlidingDataSource.allocAdoptRecord(index, key);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回平均每秒访问次数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">allowNotLimitPerMin</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = locationIndex();</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> nextIndex = index + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">this</span>.timeWindowSlidingDataSource.clearSingle(nextIndex);</span><br><span class="line">    <span class="keyword">int</span> from = index, to  = index;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; windowSize) &#123;</span><br><span class="line">        from += windowSize + <span class="number">1</span>;</span><br><span class="line">        to += <span class="number">2</span> * windowSize;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        from = index - windowSize + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (from &lt;= to)&#123;</span><br><span class="line">        <span class="keyword">int</span> targetIndex = from;</span><br><span class="line">        <span class="keyword">if</span> (from &gt;= timeSliceSize) &#123;</span><br><span class="line">            targetIndex = from - <span class="number">2</span> * windowSize;</span><br><span class="line">        &#125;</span><br><span class="line">        sum += timeWindowSlidingDataSource.getAllocAdoptRecordTimes(targetIndex, key);</span><br><span class="line">        from ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.timeWindowSlidingDataSource.allocAdoptRecord(index, key);</span><br><span class="line">    <span class="keyword">return</span> (sum + <span class="number">1</span>) / windowSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回每秒访问次数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">allowNotLimit</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = locationIndex();</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// cursor不等于index，将cursor设置为index</span></span><br><span class="line">    <span class="keyword">int</span> oldCursor = cursor.getAndSet(index);</span><br><span class="line">    <span class="keyword">if</span> (oldCursor != index) &#123;</span><br><span class="line">        <span class="comment">// 清零，访问量不大时会有时间片跳跃的情况</span></span><br><span class="line">        clearBetween(oldCursor, index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= timeSliceSize; i++) &#123;</span><br><span class="line">        sum += timeWindowSlidingDataSource.getAllocAdoptRecordTimes(i, key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.timeWindowSlidingDataSource.allocAdoptRecord(index, key);</span><br><span class="line">    <span class="keyword">return</span> sum + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;将fromIndex~toIndex之间的时间片计数都清零</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;极端情况下，当循环队列已经走了超过1个timeSliceSize以上，这里的清零并不能如期望的进行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">clearBetween</span><span class="params">(<span class="keyword">int</span> fromIndex, <span class="keyword">int</span> toIndex)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.timeWindowSlidingDataSource.clearBetween(fromIndex, toIndex, timeSliceSize);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">locationIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> time = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>) ((time / timeMillisPerSlice) % timeSliceSize);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>演示结果就不给大家展示了，刚把一大堆log去掉，然后滑动窗口的这个算法我有点拎不清，如果有更好的办法欢迎给我留言，或者github协作，该项目<a href="https://github.com/RadianceL/el-common-utils" target="_blank" rel="noopener">github</a>地址，对应实现在<code>com.el.common.time.sliding</code>包下</p>
<p>另外<br>感谢博主:  <a href="https://blog.csdn.net/tianyaleixiaowu/article/details/102861254" target="_blank" rel="noopener">tianyaleixiaowu</a>提供的基础思路</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/12/15/Sliding-Time-Window/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2019/12/15/Sliding-Time-Window/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/07/10/Spring-State-Machine/">
                            Spring State Machine
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-07-10T14:11:32+08:00">
	
		    Jul 10, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>近期因为公司订单系统大多为定时任务轮寻，执行速度依赖于定时任务执行速度，希望能够改造成实时处理，<br>所以我决定引入MQ同时使用Spring State Machine，来拆分业务与状态和数据之间的耦合<br></p>
                    
                        <a href="/2019/07/10/Spring-State-Machine/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2019/07/10/Spring-State-Machine/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/06/16/Exceptions/">
                            Exceptions
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-16T15:27:44+08:00">
	
		    Jun 16, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>在Java程序开发中，会遇到各种异常，常见的NullPonitException(NPE)，IllegalArgumentException等等，Java的优雅之处，很大一部分就在于这些刚开始看着头痛的异常中，一起来了解下<br></p>
                    
                        <a href="/2019/06/16/Exceptions/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2019/06/16/Exceptions/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/03/06/EL-IOC/">
                            EL-IOC
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-03-06T13:09:31+08:00">
	
		    Mar 06, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>发现是好久都没有写博客了，不得不说有时候工作真的是温水煮青蛙。而且现在框架层出不穷，在技术浪潮里，找到一条路变得比学习新技术更为重要</p>
<p><div align="right">—Eddie Lee</div><br></p>
                    
                        <a href="/2019/03/06/EL-IOC/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2019/03/06/EL-IOC/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2018/12/11/Working-Principle-of-Multithreading/">
                            Working Principle of Multithreading
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-12-11T17:36:44+08:00">
	
		    Dec 11, 2018
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>感谢<a href="https://www.javazhiyin.com/" target="_blank" rel="noopener">Java知音</a>小知同学提供的渠道，今天来总结下Java内存模型和乐观锁ABA问题。</p>
                    
                        <a href="/2018/12/11/Working-Principle-of-Multithreading/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2018/12/11/Working-Principle-of-Multithreading/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2018/09/14/Spring-Boot-Operational-Principle/">
                            Spring Boot Operational Principle
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-09-14T12:09:40+08:00">
	
		    Sep 14, 2018
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>好久没写博客了，这两天跟教授聊天，提到开始用spring boot，教授问我一系列问题，很多都没有回答上来，此篇博文总结下这两天关于Spring boot工作原理的学习</p>
<p><div align="right">—Eddie Lee</div><br></p>
                    
                        <a href="/2018/09/14/Spring-Boot-Operational-Principle/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2018/09/14/Spring-Boot-Operational-Principle/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2018/08/02/Multithreading/">
                            Multithreading
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-08-02T15:28:06+08:00">
	
		    Aug 02, 2018
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>来总结一下多线程开发，加深学习。<br></p>
                    
                        <a href="/2018/08/02/Multithreading/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2018/08/02/Multithreading/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2018/07/30/Map-Set-List/">
                            Map-Set-List
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-07-30T15:02:44+08:00">
	
		    Jul 30, 2018
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>读源码有助于对程序的深入理解，原来一直横向拓宽技术栈，现在开始每天读一点源码。<br>这个Map很早就已经读完了，今天偷得浮生半日闲，来分享下。<br></p>
                    
                        <a href="/2018/07/30/Map-Set-List/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2018/07/30/Map-Set-List/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2018/07/16/DynamicProxy/">
                            Dynamic Proxy
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-07-16T15:24:33+08:00">
	
		    Jul 16, 2018
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>动态代理理论及Mybatis实战<br>动态代理在我们平时编程并不常用，但因为Spring AOP以及大量框架均使用动态代理机制。<br>所以必须要掌握。<br></p>
                    
                        <a href="/2018/07/16/DynamicProxy/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2018/07/16/DynamicProxy/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-right">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2018/06/03/Java-Annotation/">
                            Java-Annotation
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2018-06-03T11:37:17+08:00">
	
		    Jun 03, 2018
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-excerpt">
                    <p>Annotation<br>I want to learn is by Spring <code>@bean</code>,Want to know how it work.<br>But toke a long time in busy.<br>Until today,There is my notes about Annotation.<br></p>
                    
                        <a href="/2018/06/03/Java-Annotation/" class="postShorten-excerpt_link link">
                            Continue reading
                        </a>
                        
                    
                </div>
            
        </div>
        
            <a href="/2018/06/03/Java-Annotation/">
                <div class="postShorten-thumbnailimg">
                    <img alt="" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=960265520,2932106354&amp;fm=27&amp;gp=0.jpg">
                </div>
            </a>
            
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/tags/Java/page/2/">
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 2</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Eddie Lee. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/eddie-personal.jpg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">Eddie Lee</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                LN
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-dbd16rvloemmuxdzniplmnxxvwoz24eya9wol0b7vvmlokgqsjivmb8dnscy.min.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
